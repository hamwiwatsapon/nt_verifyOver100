(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},9705:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var r=s(482),l=s(9108),n=s(2563),a=s.n(n),i=s(8300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1136)),"D:\\Billone\\NT\\nt_verifyOver100\\src\\app\\page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,1342)),"D:\\Billone\\NT\\nt_verifyOver100\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["D:\\Billone\\NT\\nt_verifyOver100\\src\\app\\page.tsx"],x="/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1239:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},4907:()=>{},6839:(e,t,s)=>{Promise.resolve().then(s.bind(s,5731))},5731:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var r=s(2295),l=s(5588),n=s(7695),a=s(1521),i=s(3729),d=s.n(i),c=s(429),o=s(6405),x=s(7824),m=s(3359),u=s(5076),h=s(332),p=s(7082),f=s(4202),j=s(8063),g=s(8503),b=s(3963),w=s.n(b);let y=({data:e})=>{let t=e[0].id_card_number,[s,l]=(0,i.useState)(""),[n,a]=(0,i.useState)({id_card:t,fname:"",lname:"",address_1:"",address_2:"",address_3:"",address_4:"",address_5:"",address_6:"",address_7:"",address_8:"",verify_status:""}),[d,b]=(0,i.useState)(e.filter(e=>"my Prepaid"===e.service_type_name||"my"===e.service_type_name||"my Postpaid"===e.service_type_name).map(e=>({id_card:t,msisdn:`0${e.subscriber_number}`,type_select:"not_owned"}))),y=async()=>{try{let e=await fetch("api/db-query/customerFetch",{method:"POST",body:JSON.stringify({customerData:{id_card:t}})}),s=await e.json();200===s.status&&(a(s.customerData[0]),b(s.msisdnData))}catch(e){console.error("Error:",e)}};(0,i.useEffect)(()=>{y()},[]),"EMPLOYEE_APRROVE"===n.verify_status&&w()("ข้อมูลของคุณได้รับการยืนยันตัวตนเรียบร้อย","หากต้องการแก้ไขข้อมูลกรุณาติดต่อศูนย์บริการ NT","warning").then(()=>{window.location.reload()});let v=e=>{a(t=>({...t,[e.target.id]:e.target.value}))},N=e=>{let t=e.target.value;b(d.map(s=>s.msisdn===t?{...s,type_select:e.target.checked?"owner":"not_owned"}:s))},_=e=>{b(t=>t.map(t=>t.msisdn===e?{...t,type_select:"delete"}:t))},P=async()=>{window.print(),await fetch("/api/db-query/customerInsert",{method:"POST",body:JSON.stringify({customerData:n,msisdnData:d})}).then(e=>e.json()).then(e=>console.log(e)).catch(e=>console.error("Error:",e)),w()("บันทึกข้อมูลสำเร็จ","กรุณาตรวจสอบข้อมูลเพื่อความถูกต้อง","success")};return(0,r.jsxs)("div",{className:"w-full bg-white p-5 w-a4 h-a4 print:text-sm justify-center items-center shadow-md border-black",children:[(0,r.jsxs)("div",{className:"mb-2 w-full justify-between items-center flex flex-row",children:[r.jsx("div",{className:"text-red-500 text-xl print:hidden m-5 bottom-0",children:(0,r.jsxs)("p",{children:["*** นำเอกสาร พร้อมบัตรประชาชนตัวจริง ยืนยันตัวตนได้ที่ศูนย์บริการ NT ใกล้บ้าน สามารถค้นหาได้ที่ ",r.jsx("a",{className:"text-blue-500",href:"https://www.ntplc.co.th/servicecenter",target:"_blank",children:"https://www.ntplc.co.th/servicecenter"})]})}),r.jsx("div",{children:r.jsx(c.A,{className:"print:hidden text-1xl",onPress:P,color:"warning",children:"พิมพ์เอกสาร และบันทึกข้อมูล"})})]}),r.jsx("div",{className:"w-full bg-white text-black text-xl text-center rounded-md justify-center flex flex-row print:hidden",children:(0,r.jsxs)("form",{id:"information",className:"p-0 m-0 w-full mb-5",children:[(0,r.jsxs)("div",{className:"flex flex-row",children:[r.jsx(o.Y,{className:"mr-2 mb-2",value:n?.fname,id:"fname",label:"ชื่อ",isRequired:!0,onChange:v}),r.jsx(o.Y,{className:"mr-2 mb-2",value:n?.lname,id:"lname",label:"นามสกุล",isRequired:!0,onChange:v}),r.jsx(o.Y,{className:"mr-2 mb-2",value:n?.id_card,id:"lname",label:"หมายเลขบัตรประชาชน",isRequired:!0,isReadOnly:!0,onChange:v})]}),(0,r.jsxs)("div",{className:"flex flex-row",children:[r.jsx(o.Y,{className:"mr-2 mb-2",value:n?.address_1,id:"address_1",label:"บ้านเลขที่",isRequired:!0,onChange:v}),r.jsx(o.Y,{className:"mr-2 mb-2",value:n?.address_2,id:"address_2",label:"อาคาร/หมู่บ้าน",onChange:v}),r.jsx(o.Y,{className:"mr-2 mb-2",value:n?.address_3,id:"address_3",label:"ซอย",onChange:v}),r.jsx(o.Y,{className:"mr-2 mb-2",value:n?.address_4,id:"address_4",label:"ถนน",onChange:v}),r.jsx(o.Y,{className:"mr-2 mb-2",value:n?.address_5,id:"address_5",label:"จังหวัด",isRequired:!0,onChange:v}),r.jsx(o.Y,{className:"mr-2 mb-2",value:n?.address_6,id:"address_6",label:"อำเภอ/เขต",isRequired:!0,onChange:v}),r.jsx(o.Y,{className:"mr-2 mb-2",value:n?.address_7,id:"address_7",label:"ตำบล/แขวง",isRequired:!0,onChange:v}),r.jsx(o.Y,{className:"mr-2 mb-2",value:n?.address_8,id:"address_8",label:"รหัสไปรษณีย์",isRequired:!0,onChange:v})]})]})}),(0,r.jsxs)("div",{className:"flex flex-row w-full h-fit",children:[r.jsx("div",{className:"w-full print:hidden justify-center mb-5 mr-5",children:(0,r.jsxs)(u.b,{className:"font-nt text-black w-auto",color:"primary","aria-label":"msisdn in system",id:"list_data",children:[r.jsx(h.J,{children:r.jsx(p.j,{children:(0,r.jsxs)("div",{className:"justify-between flex flex-row",children:[(0,r.jsxs)("div",{children:["เบอร์โทรศัพท์ในระบบทั้งหมด ",d.filter(e=>"owner"===e.type_select||"not_owned"===e.type_select).length," เลขหมาย (กรุณาเลือกเบอร์ที่ถือครอง)"]}),r.jsx("div",{children:r.jsx(x.K,{className:"",size:"sm",onChange:e=>{b(d.map(t=>({...t,type_select:e.target.checked?"owner":"not_owned"})))},children:"เลือกทั้งหมด"})})]})})}),r.jsx(f.y,{children:d&&d.filter(e=>"owner"===e.type_select||"not_owned"===e.type_select).map(e=>r.jsx(j.g,{children:r.jsx(g.X,{children:r.jsx(x.K,{isSelected:"owner"===e.type_select,size:"sm",onChange:N,value:e.msisdn,children:e.msisdn})})},e.msisdn))})]})}),(0,r.jsxs)("div",{className:"print:hidden w-full mb-5",children:[(0,r.jsxs)("table",{className:"font-nt text-black w-full",color:"primary","aria-label":"msisdn in system",id:"other",children:[r.jsx("thead",{children:r.jsx("tr",{children:"เบอร์ที่ถือครองอื่นๆ"})}),(0,r.jsxs)("tbody",{children:[d&&d.filter(e=>"other"===e.type_select).map(e=>r.jsx("tr",{children:(0,r.jsxs)("td",{className:"flex flex-row justify-between content-center items-center print:hidden",children:[e.msisdn,r.jsx(c.A,{className:"ml-2",isIconOnly:!0,color:"danger",onPress:()=>_(e.msisdn),children:"-"})]})},e.msisdn)),r.jsx("tr",{children:(0,r.jsxs)("td",{className:"flex flex-row justify-between content-center items-center print:hidden",children:[r.jsx(o.Y,{size:"sm",id:"other_input",maxLength:10,type:"text",onChange:e=>{""!==e.target.value&&l(e.target.value)}}),r.jsx(c.A,{className:"ml-2",isIconOnly:!0,color:"success",onPress:()=>{b(e=>[...e,{id_card:t,msisdn:s,type_select:"other"}])},children:"Add"})]})},"addbut")]})]}),r.jsx("div",{className:"text-red-500",children:"*** กรณีสำหรับเบอร์ที่ถือครองอื่นๆ กรุณานำ SIM CARD ตัวจริงมายืนยันตัวตนที่ศูนย์บริการ NT"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[r.jsx("div",{className:"print:hidden",children:(0,r.jsxs)(u.b,{className:"font-nt text-black w-auto",color:"primary","aria-label":"msisdn in hand",id:"handle",children:[r.jsx(h.J,{children:r.jsx(p.j,{children:"หมายเลขที่เป็นเจ้าของ"})}),r.jsx(f.y,{children:d&&d.filter((e,t)=>"owner"===e.type_select).map(e=>r.jsx(j.g,{children:r.jsx(g.X,{children:e.msisdn})},e.msisdn))})]})}),r.jsx("div",{className:"print:hidden",children:(0,r.jsxs)(u.b,{className:"font-nt text-black w-auto",color:"primary","aria-label":"msisdn in hand",id:"not_own",children:[r.jsx(h.J,{children:r.jsx(p.j,{children:"หมายเลขที่ไม่เกี่ยวข้อง"})}),r.jsx(f.y,{children:d&&d.filter((e,t)=>"not_owned"===e.type_select).map(e=>r.jsx(j.g,{children:r.jsx(g.X,{children:e.msisdn})},e.msisdn))})]})})]}),(0,r.jsxs)("div",{className:"flex flex-col row-start-1 text-xl col-span-full p-5 text-center w-full mt-10 print-only",children:[r.jsx("div",{className:"fixed top-0 right-0",children:r.jsx(m.J,{className:"print-only",src:"/NT-logo.png",width:150,height:100,alt:"NT logo"})}),r.jsx("div",{className:"text-center",children:r.jsx("h3",{className:"mb-20",children:"หนังสือยืนยันการถือครองเลขหมายโทรศัพท์เคลื่อนที่"})}),r.jsx("div",{children:(0,r.jsxs)("p",{className:"indent-20 text-left",children:["ข้าพเจ้า",n?.fname," ",n?.lname,"  ขอยืนยันการถือครองเลขหมายโทรศัพท์เคลื่อนที่ ขอยืนยันการถือครองเลขหมายโทรศัพท์เคลื่อนที่ จำนวน ",d.filter(e=>"owner"===e.type_select||"other"===e.type_select).length,"  เลขหมายและขอยืนยันความรับผิดชอบต่อการใช้งานเลขหมายที่ถือครองทุกเลขหมาย"]})}),r.jsx("div",{className:"text-center flex justify-end mt-10 mr-20",children:(0,r.jsxs)("div",{className:"w-fit",children:[r.jsx("p",{children:"ลงชื่อ........................................................"}),r.jsx("p",{children:"ผู้ถือครองเลขหมาย"}),(0,r.jsxs)("p",{children:["(",n?.fname," ",n?.lname,")"]})]})}),r.jsx("h1",{className:"mt-10 mb-2",children:"หมายเลขที่ยืนยันเป็นเจ้าของ"}),r.jsx("div",{className:"grid grid-cols-5",children:d&&d.filter((e,t)=>"owner"===e.type_select).map((e,t)=>r.jsx("div",{className:"mr-5",children:e.msisdn},e.msisdn))}),d.filter(e=>"other"===e.type_select).length>0&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("h1",{className:"mt-10 mb-2",children:"เบอร์ที่ถือครองอื่นๆ"}),r.jsx("div",{className:"grid grid-cols-5",children:d.filter(e=>"other"===e.type_select).map(e=>r.jsx("div",{className:"mr-5",children:e.msisdn},e.msisdn))})]}),(0,r.jsxs)("p",{className:"print:text-sm",children:[r.jsx("br",{}),r.jsx("br",{}),"หากท่านมีความประสงค์สอบถามข้อมูลเพิ่มเติมกรุณาติดต่อ Contact Center หมายเลขโทรศัพท์ 0-2401-2222 หรือ 1888"]})]})]})};var v=s(3574),N=s(9218);let _=()=>{(0,N.unstable_noStore)();let[e,t]=(0,i.useState)(""),[s,c]=(0,i.useState)(""),[o,x]=(0,i.useState)(!1),[m,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(""),[f,j]=d().useState(null),[g,b]=(0,i.useState)([]),_=async()=>{let t=new FormData;t.append("msisdn",e),t.append("idCardNumber",s),await fetch("/api/auth/customer",{method:"POST",body:t}).then(e=>e.json()).then(e=>{200===e.status?(j(e.otpData),x(!0),b(e.customerData.customer_search||[]),w()("ส่ง OTP สำเร็จ","กรุณาตรวจสอบหมายเลข OTP ในกล่องข้อความตามหมายเลขโทรศัพท์","success")):w()("หมายเลขโทรศัพท์ หรือเลขบัตรประชาชนไม่ถูกต้อง","กรุณาตรวจสอบเลขหมายอีกครั้ง หรือติดต่อศูนย์บริการ NT https://www.ntplc.co.th/servicecenter","error")}).catch(e=>{console.error("Error:",e)})},P=async e=>{e.preventDefault(),await _()},q=async e=>{e.preventDefault(),null!==f&&h===f.otp&&(Date.now()-f.timestamp)/6e4<5?u(!0):null!==f&&(Date.now()-f.timestamp)/6e4>5?w()("รหัส OTP หมดอายุ","กรุณาคลิกส่ง OTP อีกครั้ง","error"):w()("รหัส OTP ไม่ถูกต้อง","","waring")};return r.jsx(v.w,{children:m?r.jsx("main",{className:"flex min-h-screen min-w-screen bg-gradient-to-tr from-yellow-100 via-yellow-400 to-yellow-500",children:r.jsx(y,{data:g})}):r.jsx("main",{className:"flex min-h-screen min-w-screen flex-col items-center justify-center p-24 bg-gradient-to-tr from-yellow-100 via-yellow-400 to-yellow-500",children:(0,r.jsxs)("div",{className:"z-10 max-w-10xl w-full items-center justify-between font-nt text-sm lg:flex flex-col",children:[r.jsx(l.Z,{}),r.jsx("h1",{className:"mb-10 text-3xl font-extrabold text-gray-900 md:text-4xl lg:text-5xl",children:"ระบบตรวจสอบการถือครองหมายเลขโทรศัพท์"}),r.jsx("div",{className:"min-w-screen",children:o?f&&r.jsx(n.Z,{genRef:f.reference,handleInputChange:(e,t)=>{let s=e.target.value;if(/^\d$/.test(s)){let e=h.split("");e[t]=s,p(e.join(""));let r=document.getElementById(`otp${t+2}`);r&&(r.value="",r.focus())}},handleSubmit:q}):r.jsx(a.Z,{updateID:e=>{c(e.target.value)},updateMsisdn:e=>{t(e.target.value)},handleSubmit:P})})]})})})}},5588:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(2295),l=s(1223),n=s.n(l);function a(){return r.jsx(n(),{className:"mb-5",src:"/NT-logo.png",width:1e3,height:1e3,alt:"NT logo"})}},7695:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(2295),l=s(429);s(3729);var n=s(9218);let a=({handleInputChange:e,genRef:t,handleSubmit:s})=>((0,n.unstable_noStore)(),r.jsx("form",{onSubmit:s,children:(0,r.jsxs)("div",{className:"w-full flex flex-col gap-4 justify-center text-center",children:[(0,r.jsxs)("h2",{className:"mb-2 text-3xl font-extrabold text-gray-800 md:text-4xl lg:text-5xl",children:["รหัส OTP ref=",t]}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between mx-auto w-full max-w-xs",children:[r.jsx("div",{className:"w-16 h-16 mr-2",children:r.jsx("input",{className:"w-full h-full flex flex-col items-center justify-center text-center px-5 outline-none rounded-xl border border-gray-200 text-3xl bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700 text-black",type:"text",name:"otp1",id:"otp1",required:!0,maxLength:1,onChange:t=>e(t,0)})}),r.jsx("div",{className:"w-16 h-16 mr-2",children:r.jsx("input",{className:"w-full h-full flex flex-col items-center justify-center text-center px-5 outline-none rounded-xl border border-gray-200 text-3xl bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700 text-black",type:"text",name:"otp2",id:"otp2",required:!0,maxLength:1,onChange:t=>e(t,1)})}),r.jsx("div",{className:"w-16 h-16 mr-2",children:r.jsx("input",{className:"w-full h-full flex flex-col items-center justify-center text-center px-5 outline-none rounded-xl border border-gray-200 text-3xl bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700 text-black",type:"text",name:"otp3",id:"otp3",required:!0,maxLength:1,onChange:t=>e(t,2)})}),r.jsx("div",{className:"w-16 h-16 mr-2",children:r.jsx("input",{className:"w-full h-full flex flex-col items-center justify-center text-center px-5 outline-none rounded-xl border border-gray-200 text-3xl bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700 text-black",type:"text",name:"otp4",id:"otp4",required:!0,maxLength:1,onChange:t=>e(t,3)})}),r.jsx("div",{className:"w-16 h-16 mr-2",children:r.jsx("input",{className:"w-full h-full flex flex-col items-center justify-center text-center px-5 outline-none rounded-xl border border-gray-200 text-3xl bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700 text-black",type:"text",name:"otp5",id:"otp5",required:!0,maxLength:1,onChange:t=>e(t,4)})})]}),r.jsx(l.A,{className:"text-3xl",color:"warning",type:"submit",children:"ยืนยัน"}),r.jsx(l.A,{className:"text-3xl",color:"warning",type:"button",onPress:()=>{window.location.reload()},children:"ส่ง OTP อีกครั้ง"})]})}))},1521:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(2295),l=s(6405),n=s(429);s(3729);let a=({updateID:e,updateMsisdn:t,handleSubmit:s})=>r.jsx("form",{onSubmit:s,children:(0,r.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex w-full flex-wrap md:flex-nowrap mb-6 md:mb-0 gap-4 text-3xl",children:[r.jsx(l.Y,{type:"text",variant:"flat",label:"หมายเลขบัตรประชาชน",fullWidth:!0,isRequired:!0,radius:"md",size:"lg",maxLength:13,id:"cardnumber",onChange:e,required:!0,placeholder:"1330xxxxxxxxx"}),r.jsx(l.Y,{type:"text",variant:"flat",label:"หมายเลขโทรศัพท์มือถือ",fullWidth:!0,isRequired:!0,radius:"md",size:"lg",maxLength:10,id:"msisdnd",onChange:t,required:!0,placeholder:"08xxxxxxxx"})]},"flat"),r.jsx(n.A,{className:"text-3xl",type:"submit",color:"warning",fullWidth:!0,children:"รับรหัส OTP"})]})})},1342:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>a});var r=s(5036),l=s(7573),n=s.n(l);s(5023);let a={title:"NT Verify multiple mobile number.",description:"ระบบยืนยันตัวตน สำหรับผู้มีหลายหมายเลขในระบบ NT"};function i({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:n().className,children:e})})}},1136:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>a});let r=(0,s(6843).createProxy)(String.raw`D:\Billone\NT\nt_verifyOver100\src\app\page.tsx`),{__esModule:l,$$typeof:n}=r,a=r.default},3881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(337);let l=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,944,463,58],()=>s(9705));module.exports=r})();