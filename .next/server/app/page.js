(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},9705:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c});var r=s(482),a=s(9108),n=s(2563),l=s.n(n),i=s(8300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1136)),"D:\\Billone\\NT\\nt_verifyOver100\\src\\app\\page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,1342)),"D:\\Billone\\NT\\nt_verifyOver100\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["D:\\Billone\\NT\\nt_verifyOver100\\src\\app\\page.tsx"],m="/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1239:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},1424:()=>{},6839:(e,t,s)=>{Promise.resolve().then(s.bind(s,8198))},8198:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var r=s(2295),a=s(5588),n=s(7695),l=s(6405),i=s(429),d=s(3729),c=s.n(d);let o=({updateID:e,updateMsisdn:t,handleSubmit:s})=>r.jsx("form",{onSubmit:s,children:(0,r.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex w-full flex-wrap md:flex-nowrap mb-6 md:mb-0 gap-4 text-3xl",children:[r.jsx(l.Y,{type:"text",variant:"flat",label:"หมายเลขบัตรประชาชน",fullWidth:!0,isRequired:!0,radius:"md",size:"lg",maxLength:13,id:"cardnumber",onChange:e,required:!0,placeholder:"1330xxxxxxxxx"}),r.jsx(l.Y,{type:"text",variant:"flat",label:"หมายเลขโทรศัพท์มือถือ",fullWidth:!0,isRequired:!0,radius:"md",size:"lg",maxLength:10,id:"msisdnd",onChange:t,required:!0,placeholder:"08xxxxxxxx"})]},"flat"),r.jsx(i.A,{className:"text-3xl",type:"submit",color:"warning",fullWidth:!0,children:"รับรหัส OTP"})]})});var m=s(7824),x=s(5076),u=s(332),h=s(7082),p=s(4202),f=s(8063),g=s(8503),b=s(3963),j=s.n(b);let w=({data:e})=>{let t=e[0].id_card_number,[s,a]=(0,d.useState)({id_card:t,fname:"",lname:"",address_1:"",address_2:"",address_3:"",address_4:"",address_5:"",address_6:"",address_7:"",address_8:"",verify_status:""}),[n,c]=(0,d.useState)(e.filter(e=>"my Prepaid"===e.service_type_name||"my"===e.service_type_name||"my Postpaid"===e.service_type_name).map(e=>({id_card:t,msisdn:`0${e.subscriber_number}`,type_select:"not_owned"}))),o=async()=>{try{let e=await fetch("api/db-query/customerFetch",{method:"POST",body:JSON.stringify({customerData:{id_card:t}})}),s=await e.json();200===s.status&&(a(s.customerData[0]),c(s.msisdnData))}catch(e){console.error("Error:",e)}};(0,d.useEffect)(()=>{o()},[]),"EMPLOYEE_APRROVE"===s.verify_status&&j()("ข้อมูลของคุณได้รับการยืนยันตัวตนเรียบร้อย","หากต้องการแก้ไขข้อมูลกรุณาติดต่อศูนย์บริการ NT","warning").then(()=>{window.location.reload()});let b=e=>{a(t=>({...t,[e.target.id]:e.target.value}))},w=e=>{let t=e.target.value;c(n.map(s=>s.msisdn===t?{...s,type_select:e.target.checked?"owner":"not_owned"}:s))},y=e=>new Promise(t=>setTimeout(t,e)),v=async()=>{window.print(),await y(5e3),await fetch("/api/db-query/customerInsert",{method:"POST",body:JSON.stringify({customerData:s,msisdnData:n})}).then(e=>e.json()).then(e=>{200===e.status?(j()("บันทึกช้อมูลสำเร็จ","กรุณาตรวจสอบข้อมูลอีกครั้ง","success"),window.print()):j()("บันทึกข้อมูลผิดพลาด","กรุณารอการตรวจสอบ","error")}).catch(e=>{j()("บันทึกข้อมูลผิดพลาด","กรุณารอการตรวจสอบ","error"),console.error("Error:",e)})};return(0,r.jsxs)("div",{className:"w-full bg-white print:text-sm justify-center items-center shadow-md border-black",children:[(0,r.jsxs)("div",{className:"m-5 justify-between items-center md:flex lg:flex sm:flex-col md:flex-row lg:flex-row",children:[(0,r.jsxs)("div",{className:"text-red-500 md:text-xl sm:text-sm print:hidden w-fit",children:["*** นำเอกสาร พร้อมบัตรประชาชนตัวจริง ยืนยันตัวตนได้ที่ศูนย์บริการ NT ใกล้บ้าน สามารถค้นหาได้ที่ ",r.jsx("a",{className:"text-blue-500",href:"https://www.ntplc.co.th/servicecenter",target:"_blank",children:"https://www.ntplc.co.th/servicecenter"})]}),r.jsx("div",{children:r.jsx(i.A,{className:"print:hidden text-1xl sm:text-sm self-end",onPress:v,color:"warning",fullWidth:!0,children:"พิมพ์เอกสาร และบันทึกข้อมูล"})})]}),r.jsx("div",{className:"bg-white text-black md:text-xl sm:text-sm rounded-md justify-center flex flex-row print:hidden sm:flex-col sm:flex m-5",children:(0,r.jsxs)("form",{id:"information",className:"w-full print:hidden",children:[(0,r.jsxs)("div",{className:"md:flex lg:flex lg:flex-row md:flex-row sm:flex-col gap-2 mb-2",children:[r.jsx(l.Y,{className:"mb-2",size:"sm",value:s?.fname,id:"fname",label:"ชื่อ",isRequired:!0,onChange:b}),r.jsx(l.Y,{className:"mb-2",size:"sm",value:s?.lname,id:"lname",label:"นามสกุล",isRequired:!0,onChange:b}),r.jsx(l.Y,{className:"mb-2",size:"sm",value:s?.id_card,id:"lname",label:"หมายเลขบัตรประชาชน",isRequired:!0,isReadOnly:!0,onChange:b})]}),r.jsx("div",{className:"text-sm text-red-500",children:r.jsx("p",{children:"***กรอกที่อยู่ตามบัตรประชาชน"})}),(0,r.jsxs)("div",{className:"md:flex lg:flex lg:flex-row md:flex-row sm:flex-col gap-2",children:[r.jsx(l.Y,{className:"mb-2",size:"sm",value:s?.address_1,id:"address_1",label:"บ้านเลขที่",isRequired:!0,onChange:b}),r.jsx(l.Y,{className:"mb-2",size:"sm",value:s?.address_2,id:"address_2",label:"อาคาร/หมู่บ้าน",onChange:b}),r.jsx(l.Y,{className:"mb-2",size:"sm",value:s?.address_3,id:"address_3",label:"ซอย",onChange:b}),r.jsx(l.Y,{className:"mb-2",size:"sm",value:s?.address_4,id:"address_4",label:"ถนน",onChange:b}),r.jsx(l.Y,{className:"mb-2",size:"sm",value:s?.address_5,id:"address_5",label:"จังหวัด",isRequired:!0,onChange:b}),r.jsx(l.Y,{className:"mb-2",size:"sm",value:s?.address_6,id:"address_6",label:"อำเภอ/เขต",isRequired:!0,onChange:b}),r.jsx(l.Y,{className:"mb-2",size:"sm",value:s?.address_7,id:"address_7",label:"ตำบล/แขวง",isRequired:!0,onChange:b}),r.jsx(l.Y,{className:"mb-2",size:"sm",value:s?.address_8,id:"address_8",label:"รหัสไปรษณีย์",isRequired:!0,onChange:b})]})]})}),r.jsx("div",{className:"w-full",children:(0,r.jsxs)("div",{className:"print:hidden m-5",children:[r.jsx("div",{className:"text-sm text-red-500",children:r.jsx("p",{children:"***เลือกเบอร์ที่ถือครองทั้งหมด"})}),(0,r.jsxs)(x.b,{className:"font-nt text-black",color:"primary","aria-label":"msisdn in system",id:"list_data",children:[r.jsx(u.J,{children:r.jsx(h.j,{children:(0,r.jsxs)("div",{className:"justify-between flex flex-row",children:[(0,r.jsxs)("div",{children:["เบอร์โทรศัพท์ในระบบทั้งหมด ",n.filter(e=>"owner"===e.type_select||"not_owned"===e.type_select).length," เลขหมาย"]}),r.jsx("div",{children:r.jsx(m.K,{size:"sm",onChange:e=>{c(n.map(t=>({...t,type_select:e.target.checked?"owner":"not_owned"})))},isSelected:n.every(e=>"owner"===e.type_select),children:"เลือกทั้งหมด"})})]})})}),r.jsx(p.y,{children:n&&n.filter(e=>"owner"===e.type_select||"not_owned"===e.type_select).map(e=>r.jsx(f.g,{children:r.jsx(g.X,{children:r.jsx(m.K,{isSelected:"owner"===e.type_select,size:"sm",onChange:w,value:e.msisdn,children:e.msisdn})})},e.msisdn))})]})]})}),(0,r.jsxs)("div",{className:"flex flex-col row-start-1 text-xl col-span-full p-5 text-center w-full mt-10 print-only",children:[r.jsx("div",{className:"text-center",children:r.jsx("h3",{className:"mb-20",children:"หนังสือยืนยันการถือครองเลขหมายโทรศัพท์เคลื่อนที่"})}),r.jsx("div",{children:(0,r.jsxs)("p",{className:"indent-20 text-left",children:["ข้าพเจ้า",s?.fname," ",s?.lname,"  ขอยืนยันการถือครองเลขหมายโทรศัพท์เคลื่อนที่ ขอยืนยันการถือครองเลขหมายโทรศัพท์เคลื่อนที่ จำนวน ",n.filter(e=>"owner"===e.type_select).length," เลขหมายและขอยืนยันความรับผิดชอบต่อการใช้งานเลขหมายที่ถือครองทุกเลขหมาย"]})}),r.jsx("div",{className:"text-center flex justify-end mt-10 mr-20",children:(0,r.jsxs)("div",{className:"w-fit",children:[r.jsx("p",{children:"ลงชื่อ........................................................"}),r.jsx("p",{children:"ผู้ถือครองเลขหมาย"}),(0,r.jsxs)("p",{children:["(",s?.fname," ",s?.lname,")"]})]})}),r.jsx("h1",{className:"mt-10 mb-2",children:"หมายเลขที่ยืนยันเป็นเจ้าของ"}),r.jsx("div",{className:"grid grid-cols-5",children:n&&n.filter((e,t)=>"owner"===e.type_select).map((e,t)=>r.jsx("div",{className:"mr-5",children:e.msisdn},e.msisdn))}),(0,r.jsxs)("p",{className:"print:text-sm",children:[r.jsx("br",{}),r.jsx("br",{}),"หากท่านมีความประสงค์สอบถามข้อมูลเพิ่มเติมกรุณาติดต่อ Contact Center หมายเลขโทรศัพท์ 0-2401-2222 หรือ 1888"]})]})]})};var y=s(3574),v=s(9218);let _=()=>{(0,v.unstable_noStore)();let[e,t]=(0,d.useState)(""),[s,l]=(0,d.useState)(""),[i,m]=(0,d.useState)(!1),[x,u]=(0,d.useState)(!1),[h,p]=(0,d.useState)(""),[f,g]=c().useState(null),[b,_]=(0,d.useState)([]),N=async()=>{let t=new FormData;t.append("msisdn",e),t.append("idCardNumber",s),await fetch("/api/auth/customer",{method:"POST",body:t}).then(e=>e.json()).then(e=>{200===e.status?(g(e.otpData),m(!0),_(e.customerData.customer_search||[]),j()("ส่ง OTP สำเร็จ","กรุณาตรวจสอบหมายเลข OTP ในกล่องข้อความตามหมายเลขโทรศัพท์","success")):j()("หมายเลขโทรศัพท์ หรือเลขบัตรประชาชนไม่ถูกต้อง","กรุณาตรวจสอบเลขหมายอีกครั้ง หรือติดต่อศูนย์บริการ NT https://www.ntplc.co.th/servicecenter","error")}).catch(e=>{console.error("Error:",e)})},P=async e=>{e.preventDefault(),await N()},q=async e=>{e.preventDefault(),null!==f&&h===f.otp&&(Date.now()-f.timestamp)/6e4<5?u(!0):null!==f&&(Date.now()-f.timestamp)/6e4>5?j()("รหัส OTP หมดอายุ","กรุณาคลิกส่ง OTP อีกครั้ง","error"):j()("รหัส OTP ไม่ถูกต้อง","","waring")};return r.jsx(y.w,{children:x?r.jsx("main",{className:"flex min-h-screen min-w-screen bg-gradient-to-tr from-yellow-100 via-yellow-400 to-yellow-500 sm:text-sm",children:r.jsx(w,{data:b})}):r.jsx("main",{className:"sm:text-sm flex h-screen w-screen flex-col items-center justify-center p-5 bg-gradient-to-tr from-yellow-100 via-yellow-400 to-yellow-500",children:(0,r.jsxs)("div",{className:"z-10 max-w-10xl w-full items-center justify-between font-nt lg:flex flex-col",children:[r.jsx(a.Z,{}),r.jsx("h1",{className:"mb-10 text-center text-md font-extrabold text-gray-900 md:text-4xl lg:text-5xl",children:"ระบบตรวจสอบการถือครองหมายเลขโทรศัพท์"}),r.jsx("div",{className:"min-w-screen sm:text-sm md:text-md lg:text-3xl",children:i?f&&r.jsx(n.Z,{genRef:f.reference,handleInputChange:(e,t)=>{let s=e.target.value;if(/^\d$/.test(s)){let e=h.split("");e[t]=s,p(e.join(""));let r=document.getElementById(`otp${t+2}`);r&&(r.value="",r.focus())}},handleSubmit:q}):r.jsx(o,{updateID:e=>{l(e.target.value)},updateMsisdn:e=>{t(e.target.value)},handleSubmit:P})})]})})})}},5588:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(2295),a=s(1223),n=s.n(a);function l(){return r.jsx(n(),{className:"mb-5",src:"/NT-logo.png",width:1e3,height:1e3,alt:"NT logo"})}},7695:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(2295),a=s(429);s(3729);var n=s(9218);let l=({handleInputChange:e,genRef:t,handleSubmit:s})=>((0,n.unstable_noStore)(),r.jsx("form",{onSubmit:s,children:(0,r.jsxs)("div",{className:"w-full flex flex-col gap-2 justify-center text-center text-md md:text-2xl lg:text-4xl",children:[(0,r.jsxs)("h2",{className:"mb-2 text-md font-extrabold text-gray-800 md:text-4xl lg:text-5xl",children:["รหัส OTP ref=",t]}),(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-center w-full",children:[r.jsx("input",{className:"w-12 h-16 items-center justify-center text-center outline-none rounded-xl border border-gray-200 text-md bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700 text-black",type:"number",name:"otp1",id:"otp1",required:!0,maxLength:1,onChange:t=>e(t,0)}),r.jsx("input",{className:"w-12 h-16 items-center justify-center text-center outline-none rounded-xl border border-gray-200 text-md bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700 text-black",type:"text",name:"otp2",id:"otp2",required:!0,maxLength:1,onChange:t=>e(t,1)}),r.jsx("input",{className:"w-12 h-16 items-center justify-center text-center outline-none rounded-xl border border-gray-200 text-md bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700 text-black",type:"text",name:"otp3",id:"otp3",required:!0,maxLength:1,onChange:t=>e(t,2)}),r.jsx("input",{className:"w-12 h-16 items-center justify-center text-center outline-none rounded-xl border border-gray-200 text-md bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700 text-black",type:"text",name:"otp4",id:"otp4",required:!0,maxLength:1,onChange:t=>e(t,3)}),r.jsx("input",{className:"w-12 h-16 items-center justify-center text-center outline-none rounded-xl border border-gray-200 text-md bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700 text-black",type:"text",name:"otp5",id:"otp5",required:!0,maxLength:1,onChange:t=>e(t,4)})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[r.jsx(a.A,{className:"text-md self-center w-full",color:"warning",type:"submit",size:"sm",children:"ยืนยัน"}),r.jsx(a.A,{className:"text-md self-center w-full",color:"warning",type:"button",size:"sm",onPress:()=>{window.location.reload()},children:"ส่ง OTP อีกครั้ง"})]})]})}))},1342:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>l});var r=s(5036),a=s(7573),n=s.n(a);s(5023);let l={title:"NT Verify multiple mobile number.",description:"ระบบยืนยันตัวตน สำหรับผู้มีหลายหมายเลขในระบบ NT"};function i({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:n().className,children:e})})}},1136:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});let r=(0,s(6843).createProxy)(String.raw`D:\Billone\NT\nt_verifyOver100\src\app\page.tsx`),{__esModule:a,$$typeof:n}=r,l=r.default},3881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(337);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,944,63],()=>s(9705));module.exports=r})();