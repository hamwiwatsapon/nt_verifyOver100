(()=>{var e={};e.id=196,e.ids=[196],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},9379:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(482),a=r(9108),n=r(2563),l=r.n(n),i=r(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["customer",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7651)),"D:\\Billone\\NT\\nt_verifyOver100\\src\\app\\customer\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1342)),"D:\\Billone\\NT\\nt_verifyOver100\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\Billone\\NT\\nt_verifyOver100\\src\\app\\customer\\page.tsx"],u="/customer/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/customer/page",pathname:"/customer",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9806:(e,t,r)=>{Promise.resolve().then(r.bind(r,2088))},2088:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(2295),a=r(5588),n=r(7695),l=r(6405),i=r(429),o=r(3729),d=r.n(o);let c=({updateID:e,updateMsisdn:t,handleSubmit:r})=>s.jsx("form",{onSubmit:r,children:(0,s.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex w-full flex-wrap md:flex-nowrap mb-6 md:mb-0 gap-4 text-3xl",children:[s.jsx(l.Y,{type:"text",variant:"flat",label:"หมายเลขบัตรประชาชน",fullWidth:!0,isRequired:!0,radius:"md",size:"lg",maxLength:13,id:"cardnumber",onChange:e,required:!0}),s.jsx(l.Y,{type:"text",variant:"flat",label:"หมายเลขโทรศัพท์มือถือ",fullWidth:!0,isRequired:!0,radius:"md",size:"lg",maxLength:10,id:"msisdnd",onChange:t,required:!0})]},"flat"),s.jsx(i.A,{className:"text-3xl",type:"submit",color:"warning",fullWidth:!0,children:"รับรหัส OTP"})]})});var u=r(1354),m=r(6809),p=r(3574),x=r(9218),h=r(2254);let f=()=>{(0,x.unstable_noStore)(),(0,h.useRouter)();let[e,t]=(0,o.useState)(""),[r,l]=(0,o.useState)(""),[i,f]=(0,o.useState)(!1),[g,v]=(0,o.useState)(!1),[y,w]=(0,o.useState)(""),[j,b]=d().useState(null),[_,P]=(0,o.useState)([]),q=async()=>{let t=new FormData;t.append("msisdn",e),t.append("idCardNumber",r),await fetch("/api/auth/customer",{method:"POST",body:t}).then(e=>e.json()).then(e=>{200===e.status?(b(e.otpData),f(!0),P(e.customerData.customer_search||[]),alert("Check your sms to verify otp.")):alert(`Id card number or mobile number is invalid. ${e.status}`)}).catch(e=>{console.error("Error:",e)})},N=async e=>{e.preventDefault(),await q()},S=async e=>{e.preventDefault(),null!==j&&y===j.otp&&(Date.now()-j.timestamp)/6e4<5?v(!0):null!==j&&(Date.now()-j.timestamp)/6e4>5?alert("รหัส OTP หมดอายุกรุณาคลิกส่ง OTP อีกครั้ง"):alert("รหัส OTP ไม่ถูกต้อง")};return(0,s.jsxs)(p.w,{children:[s.jsx("div",{className:"fixed top-20 right-20",children:(0,s.jsxs)(m.O,{size:"lg",isBlock:!0,href:"/",color:"foreground",children:[(0,s.jsxs)("svg",{className:"h-8 w-8 text-black",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",children:["  ",s.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),"  ",s.jsx("polyline",{points:"5 12 3 12 12 3 21 12 19 12"}),"  ",s.jsx("path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"}),"  ",s.jsx("path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"})]})," กลับหน้าหลัก"]})}),g?s.jsx("main",{className:"flex min-h-screen min-w-screen bg-gradient-to-tr from-yellow-100 via-yellow-400 to-yellow-500",children:s.jsx(u.Z,{data:_,msisdn:e})}):s.jsx("main",{className:"flex min-h-screen min-w-screen flex-col items-center justify-center p-24 bg-gradient-to-tr from-yellow-100 via-yellow-400 to-yellow-500",children:(0,s.jsxs)("div",{className:"z-10 max-w-10xl w-full items-center justify-between font-nt text-sm lg:flex flex-col",children:[s.jsx(a.Z,{}),s.jsx("h1",{className:"mb-10 text-3xl font-extrabold text-gray-900 md:text-4xl lg:text-5xl",children:" ระบบยืนยันตัวตนสำหรับผู้มีเบอร์โทรศัพท์หลายหมายเลข"}),s.jsx("div",{className:"min-w-screen",children:i?j&&s.jsx(n.Z,{genRef:j.reference,handleInputChange:(e,t)=>{let r=e.target.value;if(/^[0-9]$/.test(r)){let e=y.split("");e[t]=r,w(e.join(""))}console.log(y)},handleSubmit:S}):s.jsx(c,{updateID:e=>{l(e.target.value)},updateMsisdn:e=>{t(e.target.value)},handleSubmit:N})})]})})]})}},7651:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});let s=(0,r(6843).createProxy)(String.raw`D:\Billone\NT\nt_verifyOver100\src\app\customer\page.tsx`),{__esModule:a,$$typeof:n}=s,l=s.default}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,944,621,22,26],()=>r(9379));module.exports=s})();