(()=>{var e={};e.id=487,e.ids=[487],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},2926:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(482),a=s(9108),n=s(2563),l=s.n(n),i=s(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["employee",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1793)),"D:\\Billone\\NT\\nt_verifyOver100\\src\\app\\employee\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,1342)),"D:\\Billone\\NT\\nt_verifyOver100\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\Billone\\NT\\nt_verifyOver100\\src\\app\\employee\\page.tsx"],m="/employee/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/employee/page",pathname:"/employee",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7827:(e,t,s)=>{Promise.resolve().then(s.bind(s,2350))},2350:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(2295),a=s(5588),n=s(7695),l=s(6405),i=s(429),o=s(3729),c=s.n(o);let d=({updateEmployeeID:e,handleSubmit:t})=>r.jsx("form",{onSubmit:t,children:(0,r.jsxs)("div",{className:"flex flex-col gap-4 max-w-5xl",children:[r.jsx("div",{className:"mb-6 md:mb-0 gap-4 text-sm ",children:r.jsx(l.Y,{type:"text",label:"หมายเลขประจำตัวพนักงาน",isRequired:!0,radius:"md",size:"lg",maxLength:10,id:"em",onChange:e,required:!0})},"flat"),r.jsx(i.A,{className:"text-3xl",type:"submit",color:"warning",children:"เข้าสู่ระบบ"})]})}),m=({updateMsisdn:e,handleSubmit:t})=>r.jsx("form",{onSubmit:t,className:"justify-center items-center w-full",children:(0,r.jsxs)("div",{className:"flex flex-col gap-4 max-w-5xl",children:[r.jsx("div",{className:"mb-6 md:mb-0 text-sm ",children:r.jsx(l.Y,{type:"text",label:"หมายเลขโทรศัพท์",isRequired:!0,radius:"md",size:"lg",maxLength:10,id:"em",onChange:e,required:!0})},"flat"),r.jsx(i.A,{className:"text-3xl",type:"submit",color:"warning",children:"รับรหัส OTP"})]})});var u=s(1354),p=s(6809),x=s(3574),h=s(9218),f=s(2254);let g=()=>{(0,h.unstable_noStore)(),(0,f.useRouter)();let[e,t]=(0,o.useState)(""),[s,l]=(0,o.useState)(""),[i,g]=(0,o.useState)(!1),[v,y]=(0,o.useState)(!1),[j,b]=(0,o.useState)(!1),[w,_]=(0,o.useState)(""),[P,N]=c().useState(null),[q,S]=(0,o.useState)([]),D=async()=>{let e=new FormData;e.append("EmployeeId",s),await fetch("/api/auth/employee",{method:"POST",body:e}).then(e=>e.json()).then(e=>{200===e.status&&b(!0)}).catch(e=>{console.error("Error:",e)})},O=async()=>{let t=new FormData;t.append("msisdn",e),await fetch("/api/msisdn",{method:"POST",body:t}).then(e=>e.json()).then(e=>{200===e.status?(N(e.otpData),g(!0),S(e.customerData.customer_search||[]),console.log(e.customerData.customer_search),alert("Check your sms to verify otp.")):alert(`Id card number or mobile number is invalid. ${e.status}`)}).catch(e=>{console.error("Error:",e)})},k=async e=>{e.preventDefault(),await D()},T=async e=>{e.preventDefault(),await O()},E=async e=>{e.preventDefault(),null!==P&&w===P.otp&&(Date.now()-P.timestamp)/6e4<5?y(!0):null!==P&&(Date.now()-P.timestamp)/6e4>5?alert("รหัส OTP หมดอายุกรุณาคลิกส่ง OTP อีกครั้ง"):alert("รหัส OTP ไม่ถูกต้อง")};return(0,r.jsxs)(x.w,{children:[r.jsx("div",{className:"fixed top-20 right-20",children:(0,r.jsxs)(p.O,{size:"lg",isBlock:!0,href:"/",color:"foreground",children:[(0,r.jsxs)("svg",{className:"h-8 w-8 text-black",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",children:["  ",r.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),"  ",r.jsx("polyline",{points:"5 12 3 12 12 3 21 12 19 12"}),"  ",r.jsx("path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"}),"  ",r.jsx("path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"})]})," กลับหน้าหลัก"]})}),v?r.jsx("main",{className:"flex min-h-screen min-w-screen",children:r.jsx(u.Z,{data:q,msisdn:e})}):r.jsx("main",{className:"flex min-h-screen min-w-screen flex-col items-center justify-center p-24 bg-gradient-to-tr from-yellow-100 via-yellow-400 to-yellow-500",children:(0,r.jsxs)("div",{className:"z-10 max-w-10xl w-full items-center justify-between font-nt text-sm lg:flex flex-col",children:[r.jsx(a.Z,{}),r.jsx("h1",{className:"mb-10 text-3xl font-extrabold text-gray-900 md:text-4xl lg:text-5xl",children:" ระบบยืนยันตัวตนสำหรับผู้มีเบอร์โทรศัพท์หลายหมายเลข"}),r.jsx("div",{className:"items-center",children:i?P&&r.jsx(n.Z,{genRef:P.reference,handleInputChange:(e,t)=>{let s=e.target.value;if(/^[0-9]$/.test(s)){let e=w.split("");e[t]=s,_(e.join(""))}},handleSubmit:E}):j?r.jsx(m,{updateMsisdn:e=>{t(e.target.value)},handleSubmit:T}):r.jsx(d,{updateEmployeeID:e=>{l(e.target.value)},handleSubmit:k})})]})})]})}},1793:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});let r=(0,s(6843).createProxy)(String.raw`D:\Billone\NT\nt_verifyOver100\src\app\employee\page.tsx`),{__esModule:a,$$typeof:n}=r,l=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,944,621,22,26],()=>s(2926));module.exports=r})();