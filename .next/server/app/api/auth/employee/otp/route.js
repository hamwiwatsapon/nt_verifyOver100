"use strict";(()=>{var e={};e.id=946,e.ids=[946],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9491:e=>{e.exports=require("assert")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},6224:e=>{e.exports=require("tty")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},3004:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>x,originalPathname:()=>v,patchFetch:()=>q,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>g,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>f});var a={};r.r(a),r.d(a,{POST:()=>l});var o=r(5419),p=r(9108),s=r(9678),i=r(8070),u=r(3567),n=r(7147),c=r.n(n);async function l(e){let t=await e.formData(),r=t.get("msisdn"),a=t.get("EmployeeId"),o="";null!==r&&(o=r?.toString().replace(/^0+/,""));try{let e=`https://customerapi.cattelecom.com/app/customerapi/v200/search/customer?subscriber_number=${o}&is_active=true`,t=(await u.Z.get(e,{headers:{apikey:process.env.PROD_API_KEY}})).data.customer_search[0].id_card_number,p=new Date().toLocaleString().replace(/T/," ").replace(/\..+/,""),s=`https://customerapi.cattelecom.com/app/customerapi/v200/search/customer/fetch?id_card_number=${t}&is_active=true`,n=(await u.Z.get(s,{headers:{apikey:process.env.PROD_API_KEY}})).data,l=function(){let e="",t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";for(let e=0;e<5;e++)t+=Math.floor(10*Math.random());for(let t=0;t<5;t++)e+=r.charAt(Math.floor(Math.random()*r.length));return{otp:t,reference:e,timestamp:Date.now()}}();if(l.otp,l.reference,n){let e=`${p}|${a}|EMPLOYEE|${r}|SUCCESS
`;return c().appendFile("./log/login.log",e,()=>{}),console.log(l),i.Z.json({status:200,otpData:l,customerData:n})}}catch(o){let e=new Date().toLocaleString().replace(/T/," ").replace(/\..+/,""),t=`${e}|${a}|EMPLOYEE|${r}|ERROR
`;return c().appendFile("./log/login.log",t,()=>{}),i.Z.json({status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:p.x.APP_ROUTE,page:"/api/auth/employee/otp/route",pathname:"/api/auth/employee/otp",filename:"route",bundlePath:"app/api/auth/employee/otp/route"},resolvedPagePath:"D:\\Billone\\NT\\nt_verifyOver100\\src\\app\\api\\auth\\employee\\otp\\route.tsx",nextConfigOutput:"",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:d,serverHooks:g,headerHooks:x,staticGenerationBailout:f}=m,v="/api/auth/employee/otp/route";function q(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:d})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,206,567],()=>r(3004));module.exports=a})();