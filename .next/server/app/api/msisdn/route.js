"use strict";(()=>{var e={};e.id=780,e.ids=[780],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9491:e=>{e.exports=require("assert")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},6224:e=>{e.exports=require("tty")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},2102:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>h,originalPathname:()=>v,patchFetch:()=>f,requestAsyncStorage:()=>c,routeModule:()=>m,serverHooks:()=>l,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>x});var s={};r.r(s),r.d(s,{POST:()=>u});var a=r(5419),o=r(9108),i=r(9678),n=r(8070),p=r(3567);async function u(e){let t=(await e.formData()).get("msisdn"),r="";null!==t&&(r=t.toString().replace(/^0+/,""));try{let e=`https://customerapi.cattelecom.com/app/customerapi/v200/search/customer?subscriber_number=${r}&is_active=true`,s=(await p.Z.get(e,{headers:{apikey:process.env.PROD_API_KEY}})).data.customer_search[0].id_card_number,a=`https://customerapi.cattelecom.com/app/customerapi/v200/search/customer?id_card_number=${s}&is_active=true`,o=(await p.Z.get(a,{headers:{apikey:process.env.PROD_API_KEY}})).data,i=function(){let e="",t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";for(let e=0;e<5;e++)t+=Math.floor(10*Math.random());for(let t=0;t<5;t++)e+=r.charAt(Math.floor(Math.random()*r.length));return{otp:t,reference:e,timestamp:Date.now()}}(),u=`OTP=${i.otp} [Ref: ${i.reference}] Please verify in 5 minutes`;if(o){let e=`<?xml version="1.0" encoding="utf-8"?>
        <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
            <soap:Body>
            <smssoap xmlns="http://microsoft.com/webservices/">
                <Username>rtcopr</Username>
                <Password>myRTC@brk</Password>
                <Sender>my</Sender>
                <Destination>${t}</Destination>
                <Message>${u}</Message>
                <Lang>T</Lang>
            </smssoap>
            </soap:Body>
        </soap:Envelope>`,r=await p.Z.post("http://10.100.75.4/motapi/smssoap.asmx?op=smssoap",e,{headers:{"Content-Type":"text/xml; charset: utf-8"}});if(200===r.status)return n.Z.json({status:200,otpData:i,customerData:o})}return n.Z.json({status:401})}catch(e){return n.Z.json({status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/msisdn/route",pathname:"/api/msisdn",filename:"route",bundlePath:"app/api/msisdn/route"},resolvedPagePath:"D:\\Billone\\NT\\nt_verifyOver100\\src\\app\\api\\msisdn\\route.tsx",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:l,headerHooks:h,staticGenerationBailout:x}=m,v="/api/msisdn/route";function f(){return(0,i.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:d})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,206,567],()=>r(2102));module.exports=s})();